{"version":3,"file":"privacy.4.0be6c6a3117486b08380.js","sources":["webpack:///./src/Admins.vue?a0f5","webpack:///./node_modules/vue-click-outside/index.js","webpack:///./src/Admins.vue?8364","webpack:///./src/Admins.vue","webpack:///./src/Admins.vue?020f","webpack:///./src/Admins.vue?9f78"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ClickOutside from 'vue-click-outside';\nimport HttpClient from 'nextcloud-axios';\nimport Vue from 'vue';\nimport Actions from 'nextcloud-vue/dist/Components/Actions';\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton';\nimport Avatar from 'nextcloud-vue/dist/Components/Avatar';\nimport { generateUrl } from 'nextcloud-server/dist/router';\nexport default {\n  name: 'Admins',\n  components: {\n    Actions: Actions,\n    ActionButton: ActionButton,\n    Avatar: Avatar\n  },\n  directives: {\n    ClickOutside: ClickOutside\n  },\n  data: function data() {\n    return {\n      admins: [],\n      newAdditionalAdminInputField: '',\n      isAdmin: false,\n      isLoading: true,\n      isAdding: false,\n      isSavingChanges: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.isAdmin = OC.isUserAdmin();\n    var url = generateUrl('/apps/privacy/api/admins');\n    HttpClient.get(url).then(function (resp) {\n      Vue.set(_this, 'admins', resp.data);\n      _this.isLoading = false;\n    });\n  },\n  methods: {\n    openNewAdmin: function openNewAdmin() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        _this2.isAdding = true;\n      }, 0);\n    },\n    closeNewAdmin: function closeNewAdmin() {\n      this.isAdding = false;\n      this.newAdditionalAdminInputField = '';\n    },\n    addAdditionalAdmin: function addAdditionalAdmin() {\n      var _this3 = this;\n\n      console.warn(this.newAdditionalAdminInputField);\n      var url = generateUrl('/apps/privacy/api/admins');\n      this.isSavingChanges = true;\n      HttpClient.post(url, {\n        name: this.newAdditionalAdminInputField\n      }).then(function (resp) {\n        _this3.admins.push(resp.data);\n\n        _this3.isSavingChanges = false;\n        _this3.isAdding = false;\n        _this3.newAdditionalAdminInputField = '';\n      });\n    },\n    deleteAdditionalAdmin: function deleteAdditionalAdmin(admin) {\n      var _this4 = this;\n\n      var url = generateUrl('/apps/privacy/api/admins/{id}', {\n        id: admin.id\n      });\n      HttpClient.delete(url).then(function (resp) {\n        var index = _this4.admins.indexOf(admin);\n\n        _this4.admins.splice(index, 1);\n      });\n    }\n  }\n};","function validate(binding) {\r\n  if (typeof binding.value !== 'function') {\r\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction isPopup(popupItem, elements) {\r\n  if (!popupItem || !elements)\r\n    return false\r\n\r\n  for (var i = 0, len = elements.length; i < len; i++) {\r\n    try {\r\n      if (popupItem.contains(elements[i])) {\r\n        return true\r\n      }\r\n      if (elements[i].contains(popupItem)) {\r\n        return false\r\n      }\r\n    } catch(e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isServer(vNode) {\r\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\r\n}\r\n\r\nexports = module.exports = {\r\n  bind: function (el, binding, vNode) {\r\n    if (!validate(binding)) return\r\n\r\n    // Define Handler and cache it on the element\r\n    function handler(e) {\r\n      if (!vNode.context) return\r\n\r\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\r\n      var elements = e.path || (e.composedPath && e.composedPath())\r\n      elements && elements.length > 0 && elements.unshift(e.target)\r\n      \r\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\r\n\r\n      el.__vueClickOutside__.callback(e)\r\n    }\r\n\r\n    // add Event Listeners\r\n    el.__vueClickOutside__ = {\r\n      handler: handler,\r\n      callback: binding.value\r\n    }\r\n    !isServer(vNode) && document.addEventListener('click', handler)\r\n  },\r\n\r\n  update: function (el, binding) {\r\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\r\n  },\r\n  \r\n  unbind: function (el, binding, vNode) {\r\n    // Remove Event Listeners\r\n    !isServer(vNode) && document.removeEventListener('click', el.__vueClickOutside__.handler)\r\n    delete el.__vueClickOutside__\r\n  }\r\n}\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"who-has-access\" },\n    [\n      _c(\"span\", {\n        staticClass: \"icon icon-loading\",\n        class: { hidden: !_vm.isLoading }\n      }),\n      _vm._v(\" \"),\n      _vm._l(_vm.admins, function(admin) {\n        return _c(\n          \"div\",\n          { key: admin.id, staticClass: \"admin-avatar-container\" },\n          [\n            _c(\"Avatar\", {\n              attrs: {\n                user: admin.internal ? admin.id : null,\n                \"display-name\": admin.displayname,\n                size: 64,\n                \"is-no-user\": !admin.internal\n              }\n            }),\n            _vm._v(\" \"),\n            !admin.internal\n              ? _c(\n                  \"Actions\",\n                  [\n                    _c(\n                      \"ActionButton\",\n                      {\n                        attrs: { icon: \"icon-close\" },\n                        on: {\n                          click: function($event) {\n                            return _vm.deleteAdditionalAdmin(admin)\n                          }\n                        }\n                      },\n                      [\n                        _vm._v(\n                          \"\\n\\t\\t\\t\\t\" +\n                            _vm._s(_vm.t(\"privacy\", \"Remove external admin\")) +\n                            \"\\n\\t\\t\\t\"\n                        )\n                      ]\n                    )\n                  ],\n                  1\n                )\n              : _vm._e()\n          ],\n          1\n        )\n      }),\n      _vm._v(\" \"),\n      _vm.isAdmin\n        ? _c(\n            \"div\",\n            [\n              !_vm.isAdding\n                ? _c(\n                    \"Actions\",\n                    { staticClass: \"addAdditionalAdmin\" },\n                    [\n                      _c(\n                        \"ActionButton\",\n                        {\n                          attrs: { icon: \"icon-add\" },\n                          on: { click: _vm.openNewAdmin }\n                        },\n                        [\n                          _vm._v(\n                            \"\\n\\t\\t\\t\\t\" +\n                              _vm._s(_vm.t(\"privacy\", \"Add external admin\")) +\n                              \"\\n\\t\\t\\t\"\n                          )\n                        ]\n                      )\n                    ],\n                    1\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.isAdding\n                ? _c(\n                    \"form\",\n                    {\n                      directives: [\n                        {\n                          name: \"click-outside\",\n                          rawName: \"v-click-outside\",\n                          value: _vm.closeNewAdmin,\n                          expression: \"closeNewAdmin\"\n                        }\n                      ],\n                      staticClass: \"addAdditionalAdminFormContainer\",\n                      on: {\n                        submit: function($event) {\n                          $event.preventDefault()\n                          return _vm.addAdditionalAdmin($event)\n                        }\n                      }\n                    },\n                    [\n                      _c(\"input\", {\n                        directives: [\n                          {\n                            name: \"model\",\n                            rawName: \"v-model\",\n                            value: _vm.newAdditionalAdminInputField,\n                            expression: \"newAdditionalAdminInputField\"\n                          }\n                        ],\n                        attrs: {\n                          type: \"text\",\n                          maxlength: \"64\",\n                          autocomplete: \"new-password\",\n                          autocorrect: \"off\",\n                          autocapitalize: \"off\",\n                          spellcheck: \"false\",\n                          placeholder: _vm.additionalAdminPlaceholderLabel\n                        },\n                        domProps: { value: _vm.newAdditionalAdminInputField },\n                        on: {\n                          input: function($event) {\n                            if ($event.target.composing) {\n                              return\n                            }\n                            _vm.newAdditionalAdminInputField =\n                              $event.target.value\n                          }\n                        }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"input\", {\n                        staticClass: \"icon-confirm\",\n                        attrs: { type: \"submit\", value: \"\" }\n                      })\n                    ]\n                  )\n                : _vm._e()\n            ],\n            1\n          )\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Admins.vue?vue&type=template&id=7a29763d&\"\nimport script from \"./Admins.vue?vue&type=script&lang=js&\"\nexport * from \"./Admins.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/daniel/Code/nextcloud/apps/privacy/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7a29763d')) {\n      api.createRecord('7a29763d', component.options)\n    } else {\n      api.reload('7a29763d', component.options)\n    }\n    module.hot.accept(\"./Admins.vue?vue&type=template&id=7a29763d&\", function () {\n      api.rerender('7a29763d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/Admins.vue\"\nexport default component.exports","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"","export * from \"-!../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=template&id=7a29763d&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1JA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}