{"version":3,"file":"privacy.5.32d0863eaf9d561a12e3.js","sources":["webpack:///./src/Encryption.vue?2584","webpack:///./node_modules/vue-click-outside/index.js","webpack:///./src/Encryption.vue?95af","webpack:///./src/Encryption.vue","webpack:///./src/Encryption.vue?11dc","webpack:///./src/Encryption.vue?0fd8"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport HttpClient from 'nextcloud-axios';\nimport ClickOutside from 'vue-click-outside';\nimport { generateUrl } from 'nextcloud-server/dist/router';\nimport Actions from 'nextcloud-vue/dist/Components/Actions';\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton';\nexport default {\n  name: 'Encryption',\n  components: {\n    Actions: Actions,\n    ActionButton: ActionButton\n  },\n  directives: {\n    ClickOutside: ClickOutside\n  },\n  data: function data() {\n    return {\n      fullDiskEncryptionEnabled: false,\n      serverSideEncryptionEnabled: false,\n      isAdmin: true,\n      isEditing: false,\n      isSavingChanges: false\n    };\n  },\n  computed: {\n    label: function label() {\n      if (!this.serverSideEncryptionEnabled && !this.fullDiskEncryptionEnabled) {\n        return t('privacy', 'Your files are not protected by encryption.');\n      } else if (this.serverSideEncryptionEnabled && !this.fullDiskEncryptionEnabled) {\n        return t('privacy', 'Your files are encrypted with {linkopen}server-side-encryption ↗{linkclose}.').replace('{linkopen}', '<a href=\"https://nextcloud.com/blog/encryption-in-nextcloud/\" target=\"_blank\" title=\"\" rel=\"noreferrer noopener\">').replace('{linkclose}', '</a>');\n      } else if (!this.serverSideEncryptionEnabled && this.fullDiskEncryptionEnabled) {\n        return t('privacy', 'This server is protected with full-disk-encryption.');\n      } else {\n        return t('privacy', 'Your files are encrypted with {linkopen}server-side-encryption ↗{linkclose}. Additionally, this server is protected with full-disk-encryption.').replace('{linkopen}', '<a href=\"https://nextcloud.com/blog/encryption-in-nextcloud/\" target=\"_blank\" title=\"\" rel=\"noreferrer noopener\">').replace('{linkclose}', '</a>');\n      }\n    },\n    checkboxLabel: function checkboxLabel() {\n      return t('privacy', 'This server is using full-disk-encryption.');\n    }\n  },\n  created: function created() {\n    this.fullDiskEncryptionEnabled = this.$parent.fullDiskEncryptionEnabled;\n    this.serverSideEncryptionEnabled = this.$parent.serverSideEncryptionEnabled;\n    this.isAdmin = OC.isUserAdmin();\n  },\n  methods: {\n    openEditFullDiskEncryptionForm: function openEditFullDiskEncryptionForm() {\n      var _this = this;\n\n      setTimeout(function () {\n        _this.isEditing = true;\n      }, 0);\n    },\n    cancelEditFullDiskEncryptionForm: function cancelEditFullDiskEncryptionForm() {\n      this.isEditing = false;\n    },\n    saveFullDiskEncryptionForm: function saveFullDiskEncryptionForm() {\n      var _this2 = this;\n\n      var url = generateUrl('/apps/privacy/api/fullDiskEncryption');\n      this.isSavingChanges = true;\n      HttpClient.post(url, {\n        enabled: this.fullDiskEncryptionEnabled ? '1' : '0'\n      }).then(function (resp) {\n        _this2.isSavingChanges = false;\n        _this2.isEditing = false;\n      });\n    }\n  }\n};","function validate(binding) {\r\n  if (typeof binding.value !== 'function') {\r\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction isPopup(popupItem, elements) {\r\n  if (!popupItem || !elements)\r\n    return false\r\n\r\n  for (var i = 0, len = elements.length; i < len; i++) {\r\n    try {\r\n      if (popupItem.contains(elements[i])) {\r\n        return true\r\n      }\r\n      if (elements[i].contains(popupItem)) {\r\n        return false\r\n      }\r\n    } catch(e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isServer(vNode) {\r\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\r\n}\r\n\r\nexports = module.exports = {\r\n  bind: function (el, binding, vNode) {\r\n    if (!validate(binding)) return\r\n\r\n    // Define Handler and cache it on the element\r\n    function handler(e) {\r\n      if (!vNode.context) return\r\n\r\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\r\n      var elements = e.path || (e.composedPath && e.composedPath())\r\n      elements && elements.length > 0 && elements.unshift(e.target)\r\n      \r\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\r\n\r\n      el.__vueClickOutside__.callback(e)\r\n    }\r\n\r\n    // add Event Listeners\r\n    el.__vueClickOutside__ = {\r\n      handler: handler,\r\n      callback: binding.value\r\n    }\r\n    !isServer(vNode) && document.addEventListener('click', handler)\r\n  },\r\n\r\n  update: function (el, binding) {\r\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\r\n  },\r\n  \r\n  unbind: function (el, binding, vNode) {\r\n    // Remove Event Listeners\r\n    !isServer(vNode) && document.removeEventListener('click', el.__vueClickOutside__.handler)\r\n    delete el.__vueClickOutside__\r\n  }\r\n}\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"who-has-access\" },\n    [\n      _c(\"p\", {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: !_vm.isEditing,\n            expression: \"!isEditing\"\n          }\n        ],\n        domProps: { innerHTML: _vm._s(_vm.label) }\n      }),\n      _vm._v(\" \"),\n      _vm.isAdmin && !_vm.isEditing\n        ? _c(\n            \"Actions\",\n            [\n              _c(\"ActionButton\", {\n                attrs: { icon: \"icon-rename\" },\n                on: { click: _vm.openEditFullDiskEncryptionForm }\n              })\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.isEditing\n        ? _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"click-outside\",\n                  rawName: \"v-click-outside\",\n                  value: _vm.cancelEditFullDiskEncryptionForm,\n                  expression: \"cancelEditFullDiskEncryptionForm\"\n                }\n              ]\n            },\n            [\n              _c(\"form\", [\n                _c(\"input\", {\n                  directives: [\n                    {\n                      name: \"model\",\n                      rawName: \"v-model\",\n                      value: _vm.fullDiskEncryptionEnabled,\n                      expression: \"fullDiskEncryptionEnabled\"\n                    }\n                  ],\n                  staticClass: \"checkbox\",\n                  attrs: {\n                    id: \"fullDiskEncryptionEnabledCheckbox\",\n                    disabled: _vm.isSavingChanges,\n                    type: \"checkbox\",\n                    name: \"fullDiskEncryptionEnabledCheckbox\"\n                  },\n                  domProps: {\n                    checked: Array.isArray(_vm.fullDiskEncryptionEnabled)\n                      ? _vm._i(_vm.fullDiskEncryptionEnabled, null) > -1\n                      : _vm.fullDiskEncryptionEnabled\n                  },\n                  on: {\n                    change: [\n                      function($event) {\n                        var $$a = _vm.fullDiskEncryptionEnabled,\n                          $$el = $event.target,\n                          $$c = $$el.checked ? true : false\n                        if (Array.isArray($$a)) {\n                          var $$v = null,\n                            $$i = _vm._i($$a, $$v)\n                          if ($$el.checked) {\n                            $$i < 0 &&\n                              (_vm.fullDiskEncryptionEnabled = $$a.concat([\n                                $$v\n                              ]))\n                          } else {\n                            $$i > -1 &&\n                              (_vm.fullDiskEncryptionEnabled = $$a\n                                .slice(0, $$i)\n                                .concat($$a.slice($$i + 1)))\n                          }\n                        } else {\n                          _vm.fullDiskEncryptionEnabled = $$c\n                        }\n                      },\n                      _vm.saveFullDiskEncryptionForm\n                    ]\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\n                  \"label\",\n                  { attrs: { for: \"fullDiskEncryptionEnabledCheckbox\" } },\n                  [\n                    _vm._v(\n                      \"\\n\\t\\t\\t\\t\" + _vm._s(_vm.checkboxLabel) + \"\\n\\t\\t\\t\"\n                    )\n                  ]\n                )\n              ])\n            ]\n          )\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Encryption.vue?vue&type=template&id=0fc4e288&\"\nimport script from \"./Encryption.vue?vue&type=script&lang=js&\"\nexport * from \"./Encryption.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/daniel/Code/nextcloud/apps/privacy/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0fc4e288')) {\n      api.createRecord('0fc4e288', component.options)\n    } else {\n      api.reload('0fc4e288', component.options)\n    }\n    module.hot.accept(\"./Encryption.vue?vue&type=template&id=0fc4e288&\", function () {\n      api.rerender('0fc4e288', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/Encryption.vue\"\nexport default component.exports","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Encryption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Encryption.vue?vue&type=script&lang=js&\"","export * from \"-!../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Encryption.vue?vue&type=template&id=0fc4e288&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrHA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}